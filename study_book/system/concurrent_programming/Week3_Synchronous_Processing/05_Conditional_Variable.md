# 5. 조건 변수

## 정의/설명
- 특정 조건이 만족될 때까지 기다렸다가 다시 실행되는 동기화 수단


### Producer-Consumer
- 프로그래밍 모델
- 생산자와 소비자로 나누어 접근 주체 명확히 함.

```c
// 소비자
lock(mutex)
while (buffer_is_empty())
wait(cond, mutex);   // 조건 변수 기다림
consume();
unlock(mutex);

// 생산자
lock(mutex)
produce();
signal(cond);           // 조건 만족됨을 알림
unlock(mutex)
```

- `signal`을 통해 대기중인 스레드 하나만을 대상으로 알림 수행
- `broadcast`는 모든 스레드게에 알림.

* 비고


- 시그널 발생
  - 특정 이벤트(ex. 사용자 입력, 하드웨어 이벤트 등)에 의해 발생합니다.  그 이후 커널은 해당 이벤트에 맞는 시그널을 생성합니다. 이벤트는 프로세스 내부(internally)에서 발생할 수도있고, 외부(externally)에서 발생할 수 도 있습니다.
- 시그널 전달
  - 생성한 시그널은 이벤트가 발생한 프로세스에게 전달이 됩니다.
- 시그널 처리
  - 시그널을 처리하기 위해 시그널 핸들러를 호출하고, 시그널 핸들러를 통해 시그널을 처리합니다. 
  - 이때 프로세스가 시그널을 받았을때, 무시하거나 기본 시그널 액션(종료, 코어 덤프, 무시)을 하거나, 사용자정의 함수를 불러올 수 있습니다.
  - 이때, 사용자정의 함수로 핸들러를 설정했다면 일반 함수와 똑같이 스택에 저장되고 실행되는 식으로 실행됩니다.